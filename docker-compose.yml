version: '3.9'

services:
  comfyui-docker:
    container_name: comfy-webui-docker
    build:
      context: .
      dockerfile: Dockerfile
    image: comfy-webui-docker:latest
    ports:
      - ${PORT}:5555
    volumes:
      - ${COMFY_VOLUME}:/stable-diffusion
    environment:
      - CLI_ARGS=
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              device_ids: ['0']
              capabilities: [compute, utility]